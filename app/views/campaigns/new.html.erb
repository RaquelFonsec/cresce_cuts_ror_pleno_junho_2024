<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário de Campanha</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.2.3/css/bootstrap.min.css">
    <style>
        /* Adicione seus estilos CSS personalizados aqui, se necessário */
    </style>
</head>
<body class="bg-light">
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card shadow-sm">
                    <div class="card-header bg-primary text-white">
                        Cadastro de Campanha
                    </div>
                    <div class="card-body">
                        <%= form_with(model: @campaign, local: true, html: { class: "text-dark", multipart: true }) do |form| %>
                            <div class="mb-3">
                                <%= form.label :product_id, "Produto", class: "form-label" %>
                                <%= form.collection_select :product_id, @products, :id, :name, { prompt: "Selecione um produto" }, class: "form-select" %>
                            </div>
                            <div class="mb-3">
                                <%= form.label :description, "Descrição", class: "form-label" %>
                                <%= form.text_area :description, class: "form-control", placeholder: "Digite a descrição" %>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <%= form.label :start_date, "Data de Início", class: "form-label" %>
                                    <%= form.date_field :start_date, class: "form-control" %>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <%= form.label :end_date, "Data de Término", class: "form-label" %>
                                    <%= form.date_field :end_date, class: "form-control" %>
                                </div>
                            </div>
                            <div class="mb-3">
                                <%= form.label :status, "Status", class: "form-label" %>
                                <%= form.select :status, Campaign.statuses.keys.map { |status| [status.humanize, status] }, { prompt: "Selecione um status" }, class: "form-select" %>
                            </div>
                            <div class="mb-3">
                                <%= form.label :image, "Upload de Imagem", class: "form-label" %>
                                <%= form.file_field :image, class: "form-control" %>
                            </div>
                            <%= form.fields_for :discount, @campaign.discount || @campaign.build_discount do |discount_form| %>
                                <div class="mb-3">
                                    <%= discount_form.label :discount_type, "Tipo de Desconto", class: "form-label" %>
                                    <%= discount_form.select :discount_type, [['Percentual', 'percentual'], ['Valor Fixo', 'valor_fixo']], { prompt: "Selecione um tipo de desconto" }, class: "form-select" %>
                                </div>
                                <div class="mb-3">
                                    <%= discount_form.label :discount_value, "Valor do Desconto", class: "form-label" %>
                                    <%= discount_form.number_field :discount_value, class: "form-control" %>
                                </div>
                                <%= discount_form.hidden_field :user_id, value: current_user.id %>
                            <% end %>
                            <div class="d-grid">
                                <%= form.submit "Salvar Alterações", class: "btn btn-primary btn-block mt-3" %>
                            </div>
                        <% end %>
                        <div class="d-grid mt-3">
                            <%= link_to 'Voltar às Campanhas', campaigns_path, class: "btn btn-secondary btn-block" %>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz4fnFO9gybBagwphra9j0i/rwv+8ST6bThc1j6rxUeRtxlgzKT5yOg7+r" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.2.3/js/bootstrap.min.js" crossorigin="anonymous"></script>
</body>
</html>
